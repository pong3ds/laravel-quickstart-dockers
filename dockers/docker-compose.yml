version: '2'

services:
    nginx:
        image: 3dsinteractive/nginx:1.12
        depends_on:
            - phpfpm
        ports:
            - 8081:8080
        restart: always
        volumes:
            - /var/www/laravel-quickstart-test.com:/app
            - /var/dockers/laravel-quickstart-test.com/nginx:/bitnami/nginx
            - /var/dockers/laravel-quickstart-test.com/logs:/opt/bitnami/nginx/logs
    phpfpm:
        image: 3dsinteractive/php-fpm:7.1
        restart: always
        volumes:
            - /var/www/laravel-quickstart-test.com:/app
            - /var/dockers/laravel-quickstart-test.com/php-fpm:/bitnami/php-fpm
    mysqltest:
        image: 3dsinteractive/mysql:5.7
        volumes:
            - /var/dockers/laravel-quickstart-test.com/db-test/data:/bitnami/mysql
        environment:
            - ALLOW_EMPTY_PASSWORD=yes
            - MYSQL_USER=my_user
            - MYSQL_PASSWORD=my_password
            - MYSQL_DATABASE=my_database
